(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ceb1b52"],{"1b36":function(t,e,a){"use strict";a("48ed")},"1bee":function(t,e,a){},"48ed":function(t,e,a){},"85a8":function(t,e,a){"use strict";a.d(e,"d",(function(){return r})),a.d(e,"b",(function(){return i})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return o})),a.d(e,"e",(function(){return u})),a.d(e,"h",(function(){return l})),a.d(e,"f",(function(){return d})),a.d(e,"g",(function(){return m}));var n=a("ade3"),s=a("b775");function r(t){return Object(s["a"])({url:"question/index",method:"get",params:t})}function i(t){return Object(s["a"])({url:"question/delete",method:"get",params:{id:t}})}function c(t){return Object(s["a"])({url:"question/add",method:"post",data:t})}function o(t){return Object(s["a"])({url:"question/edit",method:"post",data:t})}function u(t){return Object(s["a"])({url:"question/info",method:"get",params:Object(n["a"])({id:t},"id",t)})}function l(){return Object(s["a"])({url:"question/train",method:"get"})}function d(t){return Object(s["a"])({url:"question/match",method:"get",params:Object(n["a"])({question:t},"question",t)})}function m(){return Object(s["a"])({url:"question/total",method:"get"})}},9406:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard-container"},[a("div",{staticClass:"card-tab"},[a("el-row",{staticClass:"panel-group",attrs:{gutter:40}},[a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"question","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" Qa问答对 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.qa.questionTotal,duration:3e3}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"request-num","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 请求量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.requestNum,duration:3e3}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"valid-request-num","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 有效请求量 ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.validRequestNum,duration:3e3}})],1)])]),a("el-col",{staticClass:"card-panel-col",attrs:{xs:12,sm:12,lg:6}},[a("div",{staticClass:"card-panel",on:{click:function(e){return t.handleSetLineChartData("messages")}}},[a("div",{staticClass:"card-panel-icon-wrapper icon-message"},[a("svg-icon",{attrs:{"icon-class":"qps","class-name":"card-panel-icon"}})],1),a("div",{staticClass:"card-panel-description"},[a("div",{staticClass:"card-panel-text"},[t._v(" 峰值qps ")]),a("count-to",{staticClass:"card-panel-num",attrs:{"start-val":0,"end-val":t.qpsPeak,duration:3e3}})],1)])])],1)],1),a("el-row",{staticClass:"panel-group card",staticStyle:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},[a("div",{attrs:{id:"requestNumCharts"}})]),a("el-row",{staticClass:"panel-group card",attrs:{gutter:32}},[a("el-col",{attrs:{xs:32,sm:24,lg:12}},[a("div",{staticClass:"chart-wrapper"},[a("div",{attrs:{id:"qpsCharts"}})])]),a("el-col",{attrs:{xs:32,sm:32,lg:12}},[a("div",{staticClass:"requestType"},[a("div",{attrs:{id:"requestTypeCharts"}})])])],1)],1)},s=[],r=a("1da1"),i=a("5530"),c=(a("159b"),a("b0c0"),a("96cf"),a("2f62")),o=a("ec1b"),u=a.n(o),l=a("85a8"),d=a("b775");function m(t){return Object(d["a"])({url:"stat/qps",method:"get",params:t})}function p(t){return Object(d["a"])({url:"stat/getReqNum",method:"get",params:t})}function h(t){return Object(d["a"])({url:"stat/getQPSPeak",method:"get",params:t})}function f(t){return Object(d["a"])({url:"stat/getSevenDaysRequestNumList",method:"get",params:t})}var g=a("313e");a("817d");var v={name:"Dashboard",components:{CountTo:u.a},computed:Object(i["a"])({},Object(c["b"])(["name"])),data:function(){return{qa:{questionTotal:0},requestNum:0,validRequestNum:0,qpsPeak:0}},methods:{handleSetLineChartData:function(t){this.$emit("handleSetLineChartData",t)},initQaQuestionTotal:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["g"])().then((function(e){200==e.code&&(t.qa.questionTotal=e.data.Total)}));case 2:case"end":return e.stop()}}),e)})))()},initRequestNumCharts:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=g["init"](document.getElementById("requestNumCharts")),a=[],n=[],s=[],r=parseInt(new Date((new Date).getTime())/1e3,0),i=r-604800,t.next=5,f({endTime:r,startTime:i}).then((function(t){if(200==t.code){var e=0;t.data.data.all.forEach((function(r){a.push(r.total),s.push(r.datetime),n.push(t.data.data.valid[e].total),e++}))}}));case 5:e.setOption({title:{text:"最近七天请求量"},xAxis:{data:s,boundaryGap:!1,axisTick:{show:!1}},grid:{left:10,right:10,bottom:20,top:30,containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"},padding:[5,10]},yAxis:{axisTick:{show:!1}},legend:{data:["有效请求量","请求量"]},series:[{name:"有效请求量",itemStyle:{normal:{color:"#FF005A",lineStyle:{color:"#FF005A",width:2}}},smooth:!0,type:"line",data:n,animationDuration:2800,animationEasing:"cubicInOut"},{name:"请求量",smooth:!0,type:"line",itemStyle:{normal:{color:"#3888fa",lineStyle:{color:"#3888fa",width:2},areaStyle:{color:"#f3f8ff"}}},data:a,animationDuration:2800,animationEasing:"quadraticOut"}]});case 6:case"end":return t.stop()}}),t)})))()},initQpsCharta:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=[],a=parseInt(new Date((new Date).getTime())/1e3,0),n=a-1800,t.next=5,m({startTime:n,endTime:a}).then((function(t){t.data.forEach((function(t){var a={name:t.datetime,value:[t.datetime,t.total]};e.push(a)}))}));case 5:s=g["init"](document.getElementById("qpsCharts")),s.setOption({title:{text:"qps"},tooltip:{trigger:"axis",formatter:function(t){t=t[0];var e=new Date(t.name);return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},axisPointer:{animation:!1}},xAxis:{type:"time",splitLine:{show:!1}},yAxis:{type:"value",boundaryGap:[0,"100%"],splitLine:{show:!1}},series:[{name:"模拟数据",type:"line",showSymbol:!1,hoverAnimation:!1,data:e}]}),setInterval((function(){var t=parseInt(new Date((new Date).getTime())/1e3,0);m({startTime:t-1,endTime:t}).then((function(t){var a={name:t.data[1].datetime,value:[t.data[0].datetime,t.data[0].total]};e.shift(),e.push(a),console.log(t.data[0].datetime,t.data[0].total)})),s.setOption({series:[{data:e}]})}),1e3);case 8:case"end":return t.stop()}}),t)})))()},initRequestTypeCharts:function(){return Object(r["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=g["init"](document.getElementById("requestTypeCharts")),t.next=3,e.setOption({title:{text:"天气情况统计",subtext:"虚构数据",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{bottom:10,left:"center",data:["西凉","益州","兖州","荆州","幽州"]},series:[{type:"pie",radius:"65%",center:["50%","50%"],selectedMode:"single",data:[{value:1548,name:"幽州"},{value:735,name:"荆州"},{value:510,name:"兖州"},{value:434,name:"益州"},{value:335,name:"西凉"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});case 3:case"end":return t.stop()}}),t)})))()},initRequestNum:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,p().then((function(e){200==e.code&&(t.requestNum=e.data.RequestTotal,t.validRequestNum=e.data.ValidTotal)}));case 2:case"end":return e.stop()}}),e)})))()},initQPSPeak:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h().then((function(e){200==e.code&&(t.qpsPeak=e.data.QPSPeak)}));case 2:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.initQaQuestionTotal(),this.initRequestNumCharts(),this.initQpsCharta(),this.initRequestTypeCharts(),this.initRequestNum(),this.initQPSPeak()}},b=v,C=(a("1b36"),a("b13e"),a("2877")),q=Object(C["a"])(b,n,s,!1,null,"c89abc76",null);e["default"]=q.exports},b13e:function(t,e,a){"use strict";a("1bee")}}]);