(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd6250c6"],{a976:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{staticStyle:{margin:"10px 0"}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.add()}}},[e._v("添加问题")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"center",label:"ID",width:"95",prop:"id"}}),i("el-table-column",{attrs:{label:"Question",prop:"question"}}),i("el-table-column",{attrs:{align:"center",label:"Actions",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"info",size:"small"},on:{click:function(i){return e.showInfo(t.row.id)}}},[e._v("查看")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return e.editInfo(t.row.id)}}},[e._v("编辑")]),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return e.deleteWarn(t.row.id)}}},[e._v("删除")])]}}])})],1),i("el-pagination",{attrs:{"page-size":e.pageSize,"pager-count":11,layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}}),i("el-dialog",{attrs:{title:e.dialogTitle,visible:e.dialogFormVisible,center:"","append-to-body":!0,"lock-scroll":!1,width:"60%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("QaForm",{attrs:{type:e.dialogType,id:e.selectId},on:{submitSuccess:e.submitRollback}})],1)],1)},n=[],a=i("ade3"),o=i("b775");function r(e){return Object(o["a"])({url:"question/index",method:"get",params:e})}function l(e){return Object(o["a"])({url:"question/delete",method:"get",params:{id:e}})}function u(e){return Object(o["a"])({url:"question/add",method:"post",data:e})}function c(e){return Object(o["a"])({url:"question/edit",method:"post",data:e})}function d(e){return Object(o["a"])({url:"question/info",method:"get",params:Object(a["a"])({id:e},"id",e)})}var f=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"标准问题"}},[i("el-input",{attrs:{placeholder:"please input question..."},model:{value:e.form.question,callback:function(t){e.$set(e.form,"question",t)},expression:"form.question"}})],1),i("el-form-item",{attrs:{label:"相似问题"}},["info"!=e.type?i("el-input",{attrs:{placeholder:"please input question..."},on:{change:e.slaveQuestionChange},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addSlaveQuestion(t)}},model:{value:e.slaveQuestion,callback:function(t){e.slaveQuestion=t},expression:"slaveQuestion"}}):e._e(),i("div",{staticClass:"sims_question"},e._l(e.form.slaveQuestionList,(function(e){return i("el-form-item",{staticStyle:{"margin-top":"10px"}},[i("el-input",{attrs:{value:e.question}})],1)})),1)],1),i("el-form-item",{attrs:{label:"答案"}},[i("el-input",{attrs:{type:"textarea",placeholder:"please input answer...."},model:{value:e.form.answer,callback:function(t){e.$set(e.form,"answer",t)},expression:"form.answer"}})],1),"info"!=e.type?i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.submitButtonText))]),i("el-button",{on:{click:e.onCancel}},[e._v("Cancel")])],1):e._e()],1)],1)},m=[],h=(i("a9e3"),i("159b"),i("61f7")),p={name:"QaForm",props:{type:{type:String,required:!0,default:"add"},id:{type:Number,required:!0,default:"0"}},data:function(){return{form:{id:0,question:"",answer:"",slaveQuestionList:[]},slaveQuestion:"",submitButtonText:""}},methods:{onSubmit:function(){var e=this;if(Object(h["b"])(this.form.question))if(Object(h["b"])(this.form.answer)){var t={};t["question"]=this.form.question,t["answer"]=this.form.answer,t["slave_question"]=[],"add"==this.type?(this.form.slaveQuestionList.forEach((function(e){t["slave_question"].push(e.question)})),u(t).then((function(t){200==t["code"]?(e.$message("success!"),e.resetForm(),e.$emit("submitSuccess",!0)):e.$message({message:t.message,type:"error"})}))):(t["id"]=this.form.id,this.form.slaveQuestionList.forEach((function(e){t["slave_question"].push({id:e.id,question:e.question})})),c(t).then((function(t){200==t["code"]?e.$message("success!"):e.$message({message:t.message,type:"error"})})))}else this.$message({message:"请输入答案",type:"error"});else this.$message({message:"请输入标准问题",type:"error"})},onCancel:function(){this.resetForm(),this.$emit("submitSuccess",!0)},slaveQuestionChange:function(e){this.slaveQuestion=e},addSlaveQuestion:function(){if(""==this.slaveQuestion||0==this.slaveQuestion.length||" "==this.slaveQuestion)return this.$message({message:"请填写question...",type:"warning"}),!1;var e={question:this.slaveQuestion,id:0};this.form.slaveQuestionList.unshift(e),this.slaveQuestion=""},resetForm:function(){this.form={id:0,question:"",answer:"",slaveQuestionList:[]},this.type=""}},watch:{type:{immediate:!0,handler:function(e){console.log(e),"edit"==e?this.submitButtonText="Update":"add"==e&&(this.submitButtonText="Create")}},id:{immediate:!0,handler:function(e){var t=this;console.log("id",e),"info"!=this.type&&"edit"!=this.type||e>0&&d(e).then((function(e){if(200!=e["code"])return t.$message({message:e["message"],type:"error"}),!1;t.form={id:e.data.id,question:e.data.question,answer:e.data.answer,slaveQuestionList:[]},null!=e.data.SimilarQuestion&&e.data.SimilarQuestion.length>0&&(t.form.slaveQuestionList=e.data.SimilarQuestion)}))}}}},g=p,b=(i("fb58"),i("2877")),v=Object(b["a"])(g,f,m,!1,null,"c7928a56",null),y=v.exports,w={components:{QaForm:y},filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{list:null,listLoading:!0,total:0,pageSize:10,page:1,dialogStatus:"",dialogFormVisible:!1,dialogTitle:"添加",dialogType:"add",selectId:0}},created:function(){this.fetchData()},methods:{handleCurrentChange:function(e){this.fetchData(e)},fetchData:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.page=t,this.listLoading=!0,r({page:t,pageSize:this.pageSize}).then((function(t){e.list=t.data.Data,e.listLoading=!1,e.total=t.data.total}))},showInfo:function(e){this.selectId=e,this.dialogTitle="详情",this.dialogType="info",this.dialogFormVisible=!0},add:function(){this.dialogType="add",this.dialogTitle="添加",this.dialogFormVisible=!0,this.selectId=0},editInfo:function(e){this.selectId=e,this.dialogTitle="编辑",this.dialogType="edit",this.dialogFormVisible=!0},deleteWarn:function(e){var t=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l(e).then((function(e){200==e.code?(t.$message({type:"success",message:"删除成功!"}),t.fetchData(t.page)):t.$message({type:"error",message:"删除失败!"+e.message})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},submitRollback:function(e){e&&(this.dialogFormVisible=!1,this.fetchData(1))}}},q=w,I=Object(b["a"])(q,s,n,!1,null,null,null);t["default"]=I.exports},a9e3:function(e,t,i){"use strict";var s=i("83ab"),n=i("da84"),a=i("94ca"),o=i("6eeb"),r=i("5135"),l=i("c6b6"),u=i("7156"),c=i("c04e"),d=i("d039"),f=i("7c73"),m=i("241c").f,h=i("06cf").f,p=i("9bf2").f,g=i("58a8").trim,b="Number",v=n[b],y=v.prototype,w=l(f(y))==b,q=function(e){var t,i,s,n,a,o,r,l,u=c(e,!1);if("string"==typeof u&&u.length>2)if(u=g(u),t=u.charCodeAt(0),43===t||45===t){if(i=u.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:s=2,n=49;break;case 79:case 111:s=8,n=55;break;default:return+u}for(a=u.slice(2),o=a.length,r=0;r<o;r++)if(l=a.charCodeAt(r),l<48||l>n)return NaN;return parseInt(a,s)}return+u};if(a(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var I,Q=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof Q&&(w?d((function(){y.valueOf.call(i)})):l(i)!=b)?u(new v(q(t)),i,Q):q(t)},_=s?m(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)r(v,I=_[S])&&!r(Q,I)&&p(Q,I,h(v,I));Q.prototype=y,y.constructor=Q,o(n,b,Q)}},eae0:function(e,t,i){},fb58:function(e,t,i){"use strict";i("eae0")}}]);